# KachuFul

- Web app: https://kachuful-88b5c.web.app
- Download Android APK: https://github.com/<your-username>/kachuful/releases/latest
  - Direct link after you publish a release (example): https://github.com/<your-username>/kachuful/releases/download/v1.0.0/app-release.apk

Build locally:
- Android APK (release): flutter build apk --release
- Web PWA (release): flutter build web --release --pwa-strategy=offline-first

Deploy web (Firebase Hosting):
- npx --yes firebase-tools deploy --only hosting

Flutter app to keep scores for Kachuful with a clean per‑round input flow, PWA for the web, and Firebase‑backed score history.

## Prerequisites

- Flutter SDK (3.24+ recommended)
- Android Studio / Android SDK (for Android builds)
- A Firebase project (Auth + Firestore enabled)
- Optional: Firebase CLI (for Hosting deploys)

## 1) Install dependencies

```powershell
flutter pub get
```

## 2) Firebase configuration

This project is already wired for Firebase. Ensure these files exist with your project’s values:

- `lib/firebase_options.dart` (generated by flutterfire configure)
- `android/app/google-services.json`
- `ios/Runner/GoogleService-Info.plist` (macOS only)

Environment flags (override at run/build time):

- `USERS_COLLECTION` (default: users)
- `GAMES_COLLECTION` (default: games)
- `REQUIRE_EMAIL_VERIFIED` (default: false)

Example (web run with flags):

```powershell
flutter run -d chrome `
  --dart-define=USERS_COLLECTION=users `
  --dart-define=GAMES_COLLECTION=games `
  --dart-define=REQUIRE_EMAIL_VERIFIED=false
```

## 3) Run locally

- Web (Chrome):

```powershell
flutter run -d chrome
```

- Android (device/emulator):

```powershell
flutter devices
flutter run -d <deviceId>
```

## 4) Build Android release APK

```powershell
flutter build apk --release
```

Output: `build\app\outputs\flutter-apk\app-release.apk`

## 5) Build Web (PWA)

```powershell
flutter build web --release --pwa-strategy=offline-first
```

Output: `build\web`

## 6) Deploy to Firebase Hosting

`firebase.json` already points to `build/web`.

With global CLI:

```powershell
firebase deploy --only hosting
```

Or without global install:

```powershell
npx --yes firebase-tools deploy --only hosting
```

## 7) Push to GitHub

```powershell
git add -A
git commit -m "Your commit message"
git push origin main
```

Remote is already configured: `origin` → `https://github.com/sagargada73/kachuful.git`.

## Notes

- Offline-first: Firestore writes are queued offline and sync later. History stream shows cached data first.
- Per-round flow: After entering names, the app switches to a sequential per-round screen. At Game Over, results save to history.
- Toolchain heads-up: Plan upgrades to Gradle ≥ 8.7, AGP ≥ 8.6, Kotlin ≥ 2.1 as Flutter deprecates older versions.
